<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {% seo %}
  <link rel="canonical" href="{{ page.url | absolute_url }}">

  <!-- Google Fonts: Syne (display) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cream: '#f5eed6',
            'cream-dark': '#ebe3c7',
            mustard: '#d4912a',
            'mustard-dark': '#b87a1e',
            coral: '#c9503c',
            'coral-dark': '#a83d2c',
            sage: '#5a7a5a',
            'sage-dark': '#476047',
            dark: '#1b1b1b',
          },
          fontFamily: {
            display: ['Bebas Neue', 'system-ui', 'sans-serif'],
          }
        }
      }
    }
  </script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">

  <!-- Google Tag Manager -->
  {% if site.gtm_id and site.gtm_id != "" %}
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','{{ site.gtm_id }}');
  </script>
  {% endif %}

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "{{ site.title }}",
    "description": "{{ site.description }}",
    "url": "{{ site.url }}",
    "telephone": "{{ site.phone }}",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "{{ site.address.street }}",
      "addressLocality": "{{ site.address.city }}",
      "addressRegion": "{{ site.address.state }}",
      "postalCode": "{{ site.address.zip }}"
    },
    "openingHours": [
      {% for h in site.hours %}"{{ h.day }} {{ h.time }}"{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ]
  }
  </script>

  {% feed_meta %}
</head>
<body class="flex flex-col min-h-screen bg-cream text-dark">
  {% if site.gtm_id and site.gtm_id != "" %}
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ site.gtm_id }}" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  {% endif %}

  {% include header.html %}

  <main class="flex-grow">
    {{ content }}
  </main>

  {% include footer.html %}

  <!-- Initialize Lucide Icons -->
  <script>
    lucide.createIcons();
  </script>

  <!-- Mobile Menu Toggle -->
  <script>
    const menuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIconOpen = document.getElementById('menu-icon-open');
    const menuIconClose = document.getElementById('menu-icon-close');

    if (menuButton && mobileMenu) {
      menuButton.addEventListener('click', () => {
        const isOpen = !mobileMenu.classList.contains('hidden');
        mobileMenu.classList.toggle('hidden');
        menuIconOpen.classList.toggle('hidden');
        menuIconClose.classList.toggle('hidden');
      });
    }
  </script>

  <!-- Scroll reveal -->
  <script>
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('revealed');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    document.querySelectorAll('.reveal-on-scroll').forEach(el => observer.observe(el));
  </script>
</body>
</html>
